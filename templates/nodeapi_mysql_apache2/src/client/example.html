<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">

		<title>My beautiful app</title>
		<meta name="description" content="A usage example of the web API.">

		<link rel="stylesheet" href="css/styles.css?v=1.0">
	</head>

	<body onload="when_page_loads()">

		<h1>My beautiful app</h1>
		<p>
			About the web API:
		</p>
		<div id="api_infos"></div>

		<script src="config.js"></script>
		<script src="vendor/docker-envs/js/config-libs.js"></script>

		<script type="text/javascript">
			/**
			 * Tell what to do if the request succeeds
			 * @param result The result of the call to the API.
			 */
			function on_success( result ) {
				// Update the content of #api_infos
				var theDiv = document.getElementById( "api_infos" );
				theDiv.innerHTML = '<b>' + result + '</b>';
			}
			/**
			 * Tell what to do if the request fails
			 * @param error The error sent by the API.
			 */
			function on_error( error ) {
				// Update the content of #api_infos
				var theDiv = document.getElementById( "api_infos" );
				theDiv.innerHTML = "Failed to get the version information: " + error;
			}
			/**
			 * Function called when the page loads: it uses the web API to find out
			 * its current version information.
			 */
			function when_page_loads( ) {
				// Get the base URI of the web API, using functions from "config-libs"
				var base_uri = getWebApiBaseURI( );
				// Send the ajax request.
				$.ajax({
					url: base_url + "/version",
					type: 'GET',
					crossDomain: true,
					dataType: 'json',
					success: on_success,
					error: ajax_get_session_error
				});
			}
		</script>

	</body>
</html>
